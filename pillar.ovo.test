server {
#	listen               443;
#	ssl                  on;
#	ssl_certificate      /etc/ssl/certs/myssl.crt;
#	ssl_certificate_key  /etc/ssl/private/myssl.key;
        
	listen 80;
        #listen [::]:80 ipv6only=on default_server;
        server_name pillar.ovo.test;
        root /home/herdian/www/asilaydying/public;
        client_max_body_size 64M;
        # Deny access to any files with a .php extension in the uploads directory
        location ~* /(?:uploads|files)/.*\.php$ {
                deny all;
        }
 
        location / {
                index index.php index.html index.htm;
                try_files $uri $uri/ /index.php?$args;

        if (!-e $request_filename) {
            rewrite ^(.+)$ /index.php?_url=$1 last;
            break;
        }

        }
 
        location ~* \.(gif|jpg|jpeg|png|css|js)$ {
                expires max;
        }
 
        location ~ \.php$ {
                try_files $uri =404;
                fastcgi_split_path_info ^(.+\.php)(/.+)$;
		
		fastcgi_pass unix:/run/php/php7.0-fpm.sock;
                
                fastcgi_index index.php;
                fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
                                fastcgi_param APP_ENV dev;
                
                include fastcgi_params;
        }
}
